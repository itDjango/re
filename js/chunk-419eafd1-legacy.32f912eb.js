(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-419eafd1"],{1715:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"icon",on:{click:t.back}},[r("van-icon",{staticClass:"arrow",attrs:{name:"arrow-left"}})],1)},i=[],a={methods:{back:function(){this.$emit("back")}}},n=a,o=(r("6036"),r("2877")),c=Object(o["a"])(n,s,i,!1,null,"31a621cf",null);e["a"]=c.exports},3911:function(t,e,r){},4424:function(t,e,r){t.exports=r.p+"img/login.4e54e532.jpg"},6036:function(t,e,r){"use strict";var s=r("3911"),i=r.n(s);i.a},a55b:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"login-warpper"},[s("img",{staticClass:"login-img",attrs:{src:r("4424"),alt:"",srcset:""}}),s("div",{staticClass:"form"},[s("div",{staticClass:"form-cont"},[s("p",{staticClass:"login-title"},[t._v("登录 / 注册")]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("USERNAME")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"form-control",attrs:{type:"text",maxlength:"16",placeholder:"USERNAME",autocomplete:"off"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("PASSWORD")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",maxlength:"16",placeholder:"PASSWORD",autocomplete:"off"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("van-cell-group",[s("van-field",{staticClass:"sms",attrs:{center:"",clearable:"",label:"手机号码",placeholder:"仅注册需要",type:"number",maxlength:"11"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),s("van-cell-group",[s("van-field",{staticClass:"sms",attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"仅注册需要",maxlength:"4"},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}},[t.retry?s("van-button",{attrs:{slot:"button",disabled:"",type:"primary",size:"small"},slot:"button"},[t._v(t._s(t.retry)+"秒后再试")]):s("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:t.sendCode},slot:"button"},[t._v("发送验证码")])],1)],1),s("div",{staticClass:"form-group verify"},[s("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputEmail3"}},[t._v("验证码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyTxt,expression:"verifyTxt"}],staticClass:"form-control verify-input",attrs:{type:"text",placeholder:"请输入验证码",maxlength:"4",autocomplete:"off"},domProps:{value:t.verifyTxt},on:{input:function(e){e.target.composing||(t.verifyTxt=e.target.value)}}}),s("div",{staticClass:"col-sm-10"},[s("img",{ref:"eleVerify",attrs:{src:t.verify,title:"看不清？点击刷新"},on:{click:t.replaceVerify}})])]),s("div",{staticClass:"form-group form-group2"},[s("van-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:t.loginLoding,type:"primary"},on:{click:function(e){return t.login(!1)}}},[t._v("登 录")]),s("van-button",{attrs:{loading:t.regLoding,type:"danger"},on:{click:function(e){return t.login(!0)}}},[t._v("注 册")])],1)],1)]),s("Back",{on:{back:t.back}})],1)])},i=[],a=(r("96cf"),r("3b8d")),n=r("1715"),o=r("3d93"),c={name:"Login",mixins:[o["b"]],data:function(){return{nickname:"",password:"",tip:"",timer:0,regLoding:!1,loginLoding:!1,verify:this.Api.getAverify(),verifyTxt:"",sms:"",phone:"",retry:"",dataTimer:10}},components:{Back:n["a"]},methods:{replaceVerify:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.eleVerify["src"]=this.Api.getAverify();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),login:function(t){this.nickname&&this.password?this.verifyTxt?this.verifyTxt.length<4?this.$toast("请输入正确的验证码"):t?this.register(!0):this.register(!1):this.$toast("请输入验证码"):this.$toast("请输入用户名或者密码")},register:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r,s,i,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=20;break}return t.prev=1,this.regLoding=!0,t.next=5,this.Api.register(this.nickname,this.password,this.verifyTxt);case 5:r=t.sent,s=r.data,200==s.code?(this.setName(s.userInfo),setTimeout((function(){n.$router.go(-1)}),1500)):setTimeout((function(){n.verifyTxt="",n.replaceVerify()}),600),this.regLoding=!1,this.$toast(s.msg),t.next=18;break;case 12:t.prev=12,t.t0=t["catch"](1),console.log(t.t0),this.$toast("网络错误"),this.regLoding=!1,this.replaceVerify();case 18:t.next=36;break;case 20:return t.prev=20,this.loginLoding=!0,t.next=24,this.Api.login(this.nickname,this.password,this.verifyTxt);case 24:i=t.sent,a=i.data,200==a.code?(this.setName(a.userInfo),setTimeout((function(){n.$router.go(-1)}),1500)):setTimeout((function(){n.verifyTxt="",n.replaceVerify()}),600),this.loginLoding=!1,this.$toast(a.msg),t.next=36;break;case 31:t.prev=31,t.t1=t["catch"](20),this.$toast("网络错误"),this.loginLoding=!1,this.replaceVerify();case 36:case"end":return t.stop()}}),t,this,[[1,12],[20,31]])})));function e(e){return t.apply(this,arguments)}return e}(),sendCode:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r,s,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.phone&&11==this.phone.length&&/^[1][3,4,5,7,8][0-9]{9}$/.test(this.phone)){t.next=3;break}return t.abrupt("return",this.$toast("请输入正确的手机号"));case 3:return t.next=5,this.Api.codeMsg(this.phone);case 5:e=t.sent,r=e.data,200==r.code?(this.dataTimer=60,s=setInterval((function(){if(a.dataTimer<=0)return a.retry="",void clearInterval(s);a.retry=a.dataTimer--}),1e3)):-2==r.code&&(i=setInterval((function(){if(r.timer<=0)return a.retry="",clearInterval(i),void(a.dataTimer=60);a.retry=r.timer--}),1e3)),this.$toast(r.msg),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()}},l=c,u=(r("dd83"),r("2877")),p=Object(u["a"])(l,s,i,!1,null,"027b6fd4",null);e["default"]=p.exports},cf29:function(t,e,r){},dd83:function(t,e,r){"use strict";var s=r("cf29"),i=r.n(s);i.a}}]);