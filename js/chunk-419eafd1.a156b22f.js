(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-419eafd1"],{1715:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon",on:{click:t.back}},[a("van-icon",{staticClass:"arrow",attrs:{name:"arrow-left"}})],1)},s=[],i={methods:{back(){this.$emit("back")}}},o=i,n=(a("6036"),a("2877")),l=Object(n["a"])(o,r,s,!1,null,"31a621cf",null);e["a"]=l.exports},3911:function(t,e,a){},4424:function(t,e,a){t.exports=a.p+"img/login.4e54e532.jpg"},6036:function(t,e,a){"use strict";var r=a("3911"),s=a.n(r);s.a},a55b:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("div",{staticClass:"login-warpper"},[r("img",{staticClass:"login-img",attrs:{src:a("4424"),alt:"",srcset:""}}),r("div",{staticClass:"form"},[r("div",{staticClass:"form-cont"},[r("p",{staticClass:"login-title"},[t._v("登录 / 注册")]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("USERNAME")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"form-control",attrs:{type:"text",maxlength:"16",placeholder:"USERNAME",autocomplete:"off"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("PASSWORD")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",maxlength:"16",placeholder:"PASSWORD",autocomplete:"off"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),r("van-cell-group",[r("van-field",{staticClass:"sms",attrs:{center:"",clearable:"",label:"手机号码",placeholder:"仅注册需要",type:"number",maxlength:"11"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),r("van-cell-group",[r("van-field",{staticClass:"sms",attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"仅注册需要",maxlength:"4"},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}},[t.retry?r("van-button",{attrs:{slot:"button",disabled:"",type:"primary",size:"small"},slot:"button"},[t._v(t._s(t.retry)+"秒后再试")]):r("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:t.sendCode},slot:"button"},[t._v("发送验证码")])],1)],1),r("div",{staticClass:"form-group verify"},[r("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputEmail3"}},[t._v("验证码")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyTxt,expression:"verifyTxt"}],staticClass:"form-control verify-input",attrs:{type:"text",placeholder:"请输入验证码",maxlength:"4",autocomplete:"off"},domProps:{value:t.verifyTxt},on:{input:function(e){e.target.composing||(t.verifyTxt=e.target.value)}}}),r("div",{staticClass:"col-sm-10"},[r("img",{ref:"eleVerify",attrs:{src:t.verify,title:"看不清？点击刷新"},on:{click:t.replaceVerify}})])]),r("div",{staticClass:"form-group form-group2"},[r("van-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:t.loginLoding,type:"primary"},on:{click:function(e){return t.login(!1)}}},[t._v("登 录")]),r("van-button",{attrs:{loading:t.regLoding,type:"danger"},on:{click:function(e){return t.login(!0)}}},[t._v("注 册")])],1)],1)]),r("Back",{on:{back:t.back}})],1)])},s=[],i=a("1da1"),o=a("1715"),n=a("3d93"),l={name:"Login",mixins:[n["b"]],data(){return{nickname:"",password:"",tip:"",timer:0,regLoding:!1,loginLoding:!1,verify:this.Api.getAverify(),verifyTxt:"",sms:"",phone:"",retry:"",dataTimer:10}},components:{Back:o["a"]},methods:{replaceVerify(){var t=this;return Object(i["a"])((function*(){t.$refs.eleVerify["src"]=t.Api.getAverify()}))()},login(t){this.nickname&&this.password?this.verifyTxt?this.verifyTxt.length<4?this.$toast("请输入正确的验证码"):t?this.register(!0):this.register(!1):this.$toast("请输入验证码"):this.$toast("请输入用户名或者密码")},register(t){var e=this;return Object(i["a"])((function*(){if(t)try{e.regLoding=!0;const t=yield e.Api.register(e.nickname,e.password,e.verifyTxt),a=t.data;200==a.code?(e.setName(a.userInfo),setTimeout(()=>{e.$router.go(-1)},1500)):setTimeout(()=>{e.verifyTxt="",e.replaceVerify()},600),e.regLoding=!1,e.$toast(a.msg)}catch(a){console.log(a),e.$toast("网络错误"),e.regLoding=!1,e.replaceVerify()}else try{e.loginLoding=!0;const t=yield e.Api.login(e.nickname,e.password,e.verifyTxt),a=t.data;200==a.code?(e.setName(a.userInfo),setTimeout(()=>{e.$router.go(-1)},1500)):setTimeout(()=>{e.verifyTxt="",e.replaceVerify()},600),e.loginLoding=!1,e.$toast(a.msg)}catch(a){e.$toast("网络错误"),e.loginLoding=!1,e.replaceVerify()}}))()},sendCode(){var t=this;return Object(i["a"])((function*(){try{if(!t.phone||11!=t.phone.length||!/^[1][3,4,5,7,8][0-9]{9}$/.test(t.phone))return t.$toast("请输入正确的手机号");const e=yield t.Api.codeMsg(t.phone),a=e.data;if(200==a.code){t.dataTimer=60;let e=setInterval(()=>{if(t.dataTimer<=0)return t.retry="",void clearInterval(e);t.retry=t.dataTimer--},1e3)}else if(-2==a.code){let e=setInterval(()=>{if(a.timer<=0)return t.retry="",clearInterval(e),void(t.dataTimer=60);t.retry=a.timer--},1e3)}t.$toast(a.msg)}catch(e){}}))()}}},c=l,m=(a("dd83"),a("2877")),d=Object(m["a"])(c,r,s,!1,null,"027b6fd4",null);e["default"]=d.exports},cf29:function(t,e,a){},dd83:function(t,e,a){"use strict";var r=a("cf29"),s=a.n(r);s.a}}]);